<!doctype html>
<html>
    <style>canvas { image-rendering: pixelated; cursor: none; } </style>
    <head>
        <meta charset="UTF-8" />
        <title>Frauki's Adventure!</title>
        <script type="text/javascript" src="Src/Plugins/phaser.min.js"></script>
        <script src="Src/Plugins/phaser-debug.js"></script>
        <script src="Src/Plugins/Core.js"></script>
        <script src="Src/Plugins/Soundblaster.js"></script>
        <script src="Src/Plugins/F2Player.js"></script>

        <script type="text/javascript" src="Src/EventRouter.js"></script>
        <script type="text/javascript" src="Src/TimerUtil.js"></script>

        <script type="text/javascript" src="Src/ScriptRunner.js"></script>

        <script type="text/javascript" src="Src/CameraController.js"></script>
        <script type="text/javascript" src="Src/AudioController.js"></script>
        <script type="text/javascript" src="Src/InputController.js"></script>
        <script type="text/javascript" src="Src/EffectsController.js"></script>
        <script type="text/javascript" src="Src/EnergyController.js"></script>
        <script type="text/javascript" src="Src/ProjectileController.js"></script>
        <script type="text/javascript" src="Src/WeaponController.js"></script>
        <script type="text/javascript" src="Src/SpeechController.js"></script>

        <script type="text/javascript" src="Src/TriggerController.js"></script>
            <script type="text/javascript" src="Src/Triggers/Music.js"></script>
            <script type="text/javascript" src="Src/Triggers/Effects.js"></script>

        <script type="text/javascript" src="Src/FileMap.js"></script>

        
        <script type="text/javascript" src="Src/Loading.js"></script>        
        <script type="text/javascript" src="Src/Main.js"></script>

        <script type="text/javascript" src="Src/Frogland.js"></script>
        <script type="text/javascript" src="Src/Collision.js"></script>
        <script type="text/javascript" src="Src/Frauki.js"></script>
        <script type="text/javascript" src="Src/FraukiDamageFrames.js"></script>
        <script type="text/javascript" src="Src/Speeches.js"></script>

        <script type="text/javascript" src="Src/Enemy.js"></script>
            <script type="text/javascript" src="Src/Enemies/Insectoid.js"></script>
            <script type="text/javascript" src="Src/Enemies/Buzzar.js"></script>
            <script type="text/javascript" src="Src/Enemies/Sporoid.js"></script>
            <script type="text/javascript" src="Src/Enemies/Madman.js"></script>
            <script type="text/javascript" src="Src/Enemies/CreeperThistle.js"></script>
            <script type="text/javascript" src="Src/Enemies/Incarnate.js"></script>
            <script type="text/javascript" src="Src/Enemies/Haystax.js"></script>
            <script type="text/javascript" src="Src/Enemies/Bizarro.js"></script>
            <script type="text/javascript" src="Src/Enemies/Lancer.js"></script>
            <script type="text/javascript" src="Src/Enemies/Pincer.js"></script>
            <script type="text/javascript" src="Src/Enemies/Mask.js"></script>
            <script type="text/javascript" src="Src/Enemies/Fungu.js"></script>
            <script type="text/javascript" src="Src/Enemies/Skelegon.js"></script>
            <script type="text/javascript" src="Src/Enemies/KR32.js"></script>
            <script type="text/javascript" src="Src/Enemies/A3PZ.js"></script>
            <script type="text/javascript" src="Src/Enemies/HWK9.js"></script>

        <script type="text/javascript" src="Src/Door.js"></script>
        <script type="text/javascript" src="Src/Apple.js"></script>
        <script type="text/javascript" src="Src/EnergyNugg.js"></script>
        <script type="text/javascript" src="Src/Junk.js"></script>
        <script type="text/javascript" src="Src/TechnoRune.js"></script>
        <script type="text/javascript" src="Src/Checkpoint.js"></script>

        <script>

            var pixel = { scale: 3, canvas: null, context: null, width: 480, height: 270 };

            if(window.innerWidth < pixel.width * 2) {
                pixel.scale = 1;
                pixel.what = 3;
            } else if(window.innerWidth < pixel.width * 3) {
                pixel.scale = 2;
                pixel.what = 4;
            } else if(window.innerWidth < pixel.width * 4) {
                pixel.scale = 3;
                pixel.what = 2;
            } else {
                pixel.scale = 4;
                pixel.what = 1.5;
            }


            var hidden = "hidden";
            // Standards:
            if (hidden in document)
                document.addEventListener("visibilitychange", onchange);
            else if ((hidden = "mozHidden") in document)
                document.addEventListener("mozvisibilitychange", onchange);
            else if ((hidden = "webkitHidden") in document)
                document.addEventListener("webkitvisibilitychange", onchange);
            else if ((hidden = "msHidden") in document)
                document.addEventListener("msvisibilitychange", onchange);
            // IE 9 and lower:
            else if ("onfocusin" in document)
                document.onfocusin = document.onfocusout = onchange;
            // All others:
            else
                window.onpageshow = window.onpagehide = window.onfocus = window.onblur = onchange;

            function onchange(evt) {
                var v = "visible", h = "hidden",
                evtMap = {
                    focus: v, focusin: v, pageshow: v, blur: h, focusout: h, pagehide: h
                };

                evt = evt || window.event;
                if (evt.type in evtMap)
                    document.body.className = evtMap[evt.type];
                else
                    document.body.className = this[hidden] ? "hidden" : "visible";
                if (game) {
                    if (document.body.className.match(/hidden/)) {
                        game.input.gamepad.stop();
                    }
                    else {
                        game.input.gamepad.start();
                    }
                }
            }
            

            var game = new Phaser.Game(pixel.width * 1.5, pixel.height * 1.5, Phaser.AUTO, "game", Loading, false, false);
            var events = new EventRouter();

            var cameraController;
            var inputController;
            var effectsController;
            var energyController;
            var audioController;
            var projectileController;
            var triggerController;
            var speechController;

            var map;
            var frauki;

            game.state.add('Loading', Loading, true);
            game.state.add('Main', Main, false);


        </script>
    </head>
    <body style="background-color: black">

    </body>
</html>
